<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: stories.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: stories.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React from 'react';
import {
  Badge, Button, ListGroup, ListGroupItem, Spinner,
} from 'reactstrap';

export default class Stories extends React.Component {
  constructor(props) {
    super(props);
    const { storyList, pageSize, page } = props;
    this.state = {
      storyList: storyList.slice(page * pageSize, (page + 1) * pageSize),
    };
  }

  componentDidMount() {
    this.reorder('freshness');
  }

  componentDidUpdate(prevProps, prevState, snapshot) {
    const { page, pageSize } = this.props;
    // eslint-disable-next-line react/no-direct-mutation-state
    this.state.storyList = this
      .props
      .storyList
      .slice(page * pageSize, (page + 1) * pageSize);
  }

  /**
   * @param {'freshness'
   *        |'votes'
   *        |'comments'
   *        |'hotness'
   *        } sortBy
   */
  reorder(sortBy) {
    const {
      storyList,
      page,
      pageSize,
    } = this.props;
    if (sortBy === 'freshness') {
      storyList.sort((x1, x2) => (x2.time >= x1.time ? 1 : -1));
    } else if (sortBy === 'votes') {
      storyList.sort((x1, x2) => (x2.score >= x1.score ? 1 : -1));
    } else if (sortBy === 'hotness') {
      storyList.sort((x1, x2) => (x2.ord >= x1.ord ? 1 : -1));
    } else if (sortBy === 'comments') {
      storyList.sort((x1, x2) => (x2.descendants >= x1.descendants ? 1 : -1));
    }
    this.setState({
      storyList: storyList.slice(page * pageSize, (page + 1) * pageSize),
    });
  }

  /**
   * @param {number} score
   * @returns {'danger'|'warning'|'primary'}
   */
  static getBadgeColor(score) {
    if (score > 300) {
      return 'danger';
    }
    if (score > 100) {
      return 'warning';
    }
    return 'primary';
  }

  render() {
    const { isLoading, setStory, story } = this.props;
    return (
      isLoading
        ? (
          &lt;Spinner
            className="mt-5 mr-auto ml-auto d-block"
            style={{ width: '3rem', height: '3rem' }}
          />
        )
        : (
          &lt;div className="mt-sm-2 mt-md-2 mt-lg-3 mt-xl-3 mt-sm-0">
            &lt;div
              className="flex-row d-flex flex-nowrap align-items-center justify-content-around mb-4 mb-sm-4 mb-md-2 mb-lg-3 mb-xl-3"
            >
              &lt;Button
                color="success"
                className="d-sm-none d-md-inline d-lg-inline d-xl-inline d-none"
                size="sm"
                onClick={() => this.reorder('freshness')}
              >
                Freshness
                &lt;p className="rotate-90 p-0 m-0 d-inline-block ml-2 position-relative" style={{ top: '2px' }}>&amp;gt;&lt;/p>
              &lt;/Button>
              &lt;Button
                color="danger"
                onClick={() => this.reorder('hotness')}
              >
                Hot
                &lt;p className="rotate-90 p-0 m-0 d-inline-block ml-2 position-relative" style={{ top: '2px' }}>&amp;gt;&lt;/p>
              &lt;/Button>
              &lt;Button
                color="warning"
                className="text-white"
                onClick={() => this.reorder('votes')}
              >
                Upvotes
                &lt;p className="rotate-90 p-0 m-0 d-inline-block ml-2 position-relative" style={{ top: '2px' }}>&amp;gt;&lt;/p>
              &lt;/Button>
              &lt;Button
                color="primary"
                onClick={() => this.reorder('comments')}
              >
                Comments
                &lt;p className="rotate-90 p-0 m-0 d-inline-block ml-2 position-relative" style={{ top: '2px' }}>&amp;gt;&lt;/p>
              &lt;/Button>
            &lt;/div>

            &lt;ListGroup>
              {this.state.storyList.map((s) => (
                &lt;ListGroupItem
                  key={s.id}
                  className="p-0 bg-transparent"
                  active={story !== null &amp;&amp; story.id === s.id}
                >
                  &lt;Button
                    disabled={isLoading}
                    active={story !== null &amp;&amp; story.id === s.id}
                    className="bg-transparent w-100 text-left"
                    onClick={(e) => {
                      e.preventDefault();
                      setStory(s);
                    }}
                  >
                    &lt;Badge pill color={Stories.getBadgeColor(s.score)}>
                      &lt;span>{s.score}&lt;/span>
                    &lt;/Badge>
                    &lt;span>{s.title}&lt;/span>
                    &lt;br />
                    &lt;Badge pill color="info" className="float-right">
                      &lt;span>{s.descendants}&lt;/span>
                      {' '}
                      comments
                    &lt;/Badge>
                  &lt;/Button>
                &lt;/ListGroupItem>
              ))}
            &lt;/ListGroup>

          &lt;/div>
        )
    );
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Story.html">Story</a></li></ul><h3>Global</h3><ul><li><a href="global.html#beginLoading">beginLoading</a></li><li><a href="global.html#changePage">changePage</a></li><li><a href="global.html#checkValidServiceWorker">checkValidServiceWorker</a></li><li><a href="global.html#didLoad">didLoad</a></li><li><a href="global.html#endLoading">endLoading</a></li><li><a href="global.html#fmtUNIXTime">fmtUNIXTime</a></li><li><a href="global.html#getBadgeColor">getBadgeColor</a></li><li><a href="global.html#load">load</a></li><li><a href="global.html#loadItem">loadItem</a></li><li><a href="global.html#loadList">loadList</a></li><li><a href="global.html#loadStories">loadStories</a></li><li><a href="global.html#loadUser">loadUser</a></li><li><a href="global.html#Paginator">Paginator</a></li><li><a href="global.html#refreshStories">refreshStories</a></li><li><a href="global.html#register">register</a></li><li><a href="global.html#registerValidSW">registerValidSW</a></li><li><a href="global.html#render">render</a></li><li><a href="global.html#reorder">reorder</a></li><li><a href="global.html#saveHistory">saveHistory</a></li><li><a href="global.html#setStory">setStory</a></li><li><a href="global.html#setUser">setUser</a></li><li><a href="global.html#Title">Title</a></li><li><a href="global.html#User">User</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Sun Jan 19 2020 15:17:38 GMT+0000 (Greenwich Mean Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
